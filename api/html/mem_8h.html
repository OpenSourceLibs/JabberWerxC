<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>JabberWerxC: mem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">JabberWerxC
   &#160;<span id="projectnumber">2015.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_849b60ffe128985f6c5d0ef3e5284e22.html">include</a></li><li class="navelem"><a class="el" href="dir_9e648087d18bc011163f1fa270b33ab2.html">jabberwerx</a></li><li class="navelem"><a class="el" href="dir_ada9dcaec615b54a1cb7dcb7ee31db49.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains JabberWerxC allocation related functions and jw_pool objects.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="basics_8h_source.html">../basics.h</a>&quot;</code><br />
</div>
<p><a href="mem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a07d7228a240d61b783d9b8395e72c656"><td class="memItemLeft" align="right" valign="top">typedef struct _jw_pool_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a></td></tr>
<tr class="separator:a07d7228a240d61b783d9b8395e72c656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255dff17d1bc72e3e9c0696f3faab1a9"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a255dff17d1bc72e3e9c0696f3faab1a9">jw_pool_cleaner</a>) (void *arg)</td></tr>
<tr class="separator:a255dff17d1bc72e3e9c0696f3faab1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590406eb1932e204d0eafefaedf50dc7"><td class="memItemLeft" align="right" valign="top">typedef void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a590406eb1932e204d0eafefaedf50dc7">jw_data_malloc_func</a>) (size_t size)</td></tr>
<tr class="separator:a590406eb1932e204d0eafefaedf50dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b1b2c4f63e835348a30172c74e271c"><td class="memItemLeft" align="right" valign="top">typedef void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a07b1b2c4f63e835348a30172c74e271c">jw_data_realloc_func</a>) (void *ptr, size_t size)</td></tr>
<tr class="separator:a07b1b2c4f63e835348a30172c74e271c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399e3fa217f8ba88d165e055c9cd54df"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a399e3fa217f8ba88d165e055c9cd54df">jw_data_free_func</a>) (void *ptr)</td></tr>
<tr class="separator:a399e3fa217f8ba88d165e055c9cd54df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a985452713dd31ddaac9aaeab80230946"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a985452713dd31ddaac9aaeab80230946">jw_data_set_memory_funcs</a> (<a class="el" href="mem_8h.html#a590406eb1932e204d0eafefaedf50dc7">jw_data_malloc_func</a> malloc_func, <a class="el" href="mem_8h.html#a07b1b2c4f63e835348a30172c74e271c">jw_data_realloc_func</a> realloc_func, <a class="el" href="mem_8h.html#a399e3fa217f8ba88d165e055c9cd54df">jw_data_free_func</a> free_func)</td></tr>
<tr class="separator:a985452713dd31ddaac9aaeab80230946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade41e90b4f9a9ba9425cf1adc23520af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#ade41e90b4f9a9ba9425cf1adc23520af">jw_data_free</a> (void *ptr)</td></tr>
<tr class="separator:ade41e90b4f9a9ba9425cf1adc23520af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3e1891b46e607875238265f290fb29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#abd3e1891b46e607875238265f290fb29">jw_data_malloc</a> (size_t size)</td></tr>
<tr class="separator:abd3e1891b46e607875238265f290fb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f43b497b53a7de6c0487a881eaf6e97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a9f43b497b53a7de6c0487a881eaf6e97">jw_data_realloc</a> (void *ptr, size_t size)</td></tr>
<tr class="separator:a9f43b497b53a7de6c0487a881eaf6e97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f529b3571502009de981dafa352547d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a3f529b3571502009de981dafa352547d">jw_data_calloc</a> (size_t nmemb, size_t size)</td></tr>
<tr class="separator:a3f529b3571502009de981dafa352547d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a349c682ec71a96662932b6079dfcc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a72a349c682ec71a96662932b6079dfcc">jw_data_strdup</a> (const char *src)</td></tr>
<tr class="separator:a72a349c682ec71a96662932b6079dfcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae78b59da4954ebcd76423be76df641"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a5ae78b59da4954ebcd76423be76df641">jw_data_strndup</a> (const char *src, size_t len)</td></tr>
<tr class="separator:a5ae78b59da4954ebcd76423be76df641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd72f610af884058dcdda3eb947e0bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a6fd72f610af884058dcdda3eb947e0bb">jw_pool_create</a> (size_t size, <a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> **pool, <a class="el" href="structjw__err.html">jw_err</a> *err)</td></tr>
<tr class="separator:a6fd72f610af884058dcdda3eb947e0bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166b7b46a65b6d4f7004ab60479022d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a166b7b46a65b6d4f7004ab60479022d2">jw_pool_destroy</a> (<a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *pool)</td></tr>
<tr class="separator:a166b7b46a65b6d4f7004ab60479022d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f5b73061300c5869e67c0fca9eaf26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a76f5b73061300c5869e67c0fca9eaf26">jw_pool_add_cleaner</a> (<a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *pool, <a class="el" href="mem_8h.html#a255dff17d1bc72e3e9c0696f3faab1a9">jw_pool_cleaner</a> callback, void *arg, <a class="el" href="structjw__err.html">jw_err</a> *err)</td></tr>
<tr class="separator:a76f5b73061300c5869e67c0fca9eaf26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefd486f26ffcd709b1e115f0d759cfa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#abefd486f26ffcd709b1e115f0d759cfa">jw_pool_malloc</a> (<a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *pool, size_t size, void **ptr, <a class="el" href="structjw__err.html">jw_err</a> *err)</td></tr>
<tr class="separator:abefd486f26ffcd709b1e115f0d759cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae59f4bc0b44255ea89ffe96b137eef53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#ae59f4bc0b44255ea89ffe96b137eef53">jw_pool_calloc</a> (<a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *pool, size_t num, size_t size, void **ptr, <a class="el" href="structjw__err.html">jw_err</a> *err)</td></tr>
<tr class="separator:ae59f4bc0b44255ea89ffe96b137eef53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c9fe02c0a8d997d2af45609bd52231"><td class="memItemLeft" align="right" valign="top"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem_8h.html#a91c9fe02c0a8d997d2af45609bd52231">jw_pool_strdup</a> (<a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *pool, const char *src, char **cpy, <a class="el" href="structjw__err.html">jw_err</a> *err)</td></tr>
<tr class="separator:a91c9fe02c0a8d997d2af45609bd52231"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains JabberWerxC allocation related functions and jw_pool objects. </p>
<p>Memory Pools A memory pool is a minimal memory manager that simplifies freeing memory in non-trivial data structures. Two examples in the JabberWerxC API using memory pools are jw_dom and jw_jid.</p>
<p>Pools are passed a "block" size on creation. Each pool sub-allocates from its block, which grows as needed. Blocks allow large amounts of memory to be freed quickly. If no block size is given, or a request is made that is too large for a single, empty block to hold, memory is allocated directly but still freed when the pool is destroyed.</p>
<p>Applications can register callbacks, call cleaners, that will be triggered when the pool is destroyed. These cleaners will be executed in the same order they were registered. For example, jw_jid uses a cleaner to automatically decrement reference counts if the jw_jid is used within the same context as the jw_pool.</p>
<p>Pools work well with data structures that are relatively static, unchanging. Pools have no way to free a particular pointer and no garbage collection. Thus changes to a pool managed data structure may result in unreferenced but still allocated memory. These are cleaned up when the pool is destroyed.</p>
<p>Because pools free everything on their destruction they also work well for tasks were the lifetime of the pool is short.</p>
<p>Copyrights</p>
<p>Portions created or assigned to Cisco Systems, Inc. are Copyright (c) 2010-2015 Cisco Systems, Inc. All Rights Reserved. See LICENSE for details. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a399e3fa217f8ba88d165e055c9cd54df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* jw_data_free_func) (void *ptr)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback signature used by jw_data_free.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>Pointer to memory block that will be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a590406eb1932e204d0eafefaedf50dc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void*(* jw_data_malloc_func) (size_t size)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback signature used by jw_data_malloc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the memory to be allocated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void*</td><td>Pointer to memory block created by jw_data_malloc </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a07b1b2c4f63e835348a30172c74e271c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void*(* jw_data_realloc_func) (void *ptr, size_t size)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback signature used by jw_data_realloc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>Pointer to the memory block that will be altered. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the final memory block. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void*</td><td>Pointer to memory block created by jw_data_realloc </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a07d7228a240d61b783d9b8395e72c656"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct _jw_pool_int <a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An instance of a memory pool </p>

</div>
</div>
<a class="anchor" id="a255dff17d1bc72e3e9c0696f3faab1a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* jw_pool_cleaner) (void *arg)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A callback invoked when the bound pool entry is destroyed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Argument bound to cleaner when it was added. Typically the pointer about to be freed but it may be any user data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3f529b3571502009de981dafa352547d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void* jw_data_calloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Contiguously allocates enough space for nmemb objects that are size bytes of memory each and returns a pointer to the allocated memory. The allocated memory is filled with bytes of value zero.</p>
<dl class="section see"><dt>See also</dt><dd>api-design for a detailed discussion of jwc memory philosophy and design</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nmemb</td><td>The number of contiguous chunks to allocate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The number of bytes to allocate per chunk. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void*</td><td>Pointer to the allocated memory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade41e90b4f9a9ba9425cf1adc23520af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void jw_data_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release memory allocated by the JabberWerxC library.</p>
<p>jw_data_free must be used to release any memory allocated by jabberwerx, and cannot be used to free memory allocated elsewhere.</p>
<p>The library typically allocates memory in functions returning unstructured data. The function documentation will explicitly state what should be released using jw_data_free.</p>
<dl class="section see"><dt>See also</dt><dd>api-design for a detailed discussion of jwc memor philosophy and design</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>The pointer to be freed. May be NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abd3e1891b46e607875238265f290fb29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void* jw_data_malloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate 'size' bytes of memory and return a pointer of the allocated memory.</p>
<dl class="section see"><dt>See also</dt><dd>api-design for a detailed discussion of jwc memory philosophy and design</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void*</td><td>Pointer to the allocated memory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9f43b497b53a7de6c0487a881eaf6e97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void* jw_data_realloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Changes the size of the memory block pointed to by 'ptr' to size 'size'.</p>
<dl class="section see"><dt>See also</dt><dd>api-design for a detailed discussion of jwc memory philosophy and design</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>The original block of memory allocated through jw_data_malloc. if ptr is NULL, this function is equivalent to jw_data_malloc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The number of bytes to reallocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void*</td><td>Pointer to the resized memory block. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a985452713dd31ddaac9aaeab80230946"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void jw_data_set_memory_funcs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a590406eb1932e204d0eafefaedf50dc7">jw_data_malloc_func</a>&#160;</td>
          <td class="paramname"><em>malloc_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07b1b2c4f63e835348a30172c74e271c">jw_data_realloc_func</a>&#160;</td>
          <td class="paramname"><em>realloc_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a399e3fa217f8ba88d165e055c9cd54df">jw_data_free_func</a>&#160;</td>
          <td class="paramname"><em>free_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replace memory allocators used by this library.</p>
<p>If you call this function, it is imperative that you call it before any other function in either the jabberwerx library or any dependent library affected by the <a class="el" href="basics_8h.html#a855adf2d5e29debff721a24fbf3e218b">jw_global_init()</a> function. This is to ensure that all memory allocated with a particular malloc implementation is freed via the appropriately paired free implementation.</p>
<p>Any memory function can be set to its default state by passing in NULL. If one function is going to be set to its default state, it is preferred to set all of them to their default states.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">malloc_func</td><td>Function to replace malloc </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">realloc_func</td><td>Function to replace realloc </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">free_func</td><td>Function to replace free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a72a349c682ec71a96662932b6079dfcc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> char* jw_data_strdup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Duplicate a string by allocating memory</p>
<dl class="section see"><dt>See also</dt><dd>api-design for a detailed discussion of jwc memory philosophy and design</dd></dl>
<p>This function can generate the same errors as <a class="el" href="mem_8h.html#abd3e1891b46e607875238265f290fb29">jw_data_malloc()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>The null (\0) terminated string to copy. May be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">char</td><td>* Returns the copy of the string, allocated with <a class="el" href="mem_8h.html#abd3e1891b46e607875238265f290fb29">jw_data_malloc()</a>, NULL if src is NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5ae78b59da4954ebcd76423be76df641"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> char* jw_data_strndup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Duplicate a string by allocating memory</p>
<dl class="section see"><dt>See also</dt><dd>api-design for a detailed discussion of jwc memory philosophy and design</dd></dl>
<p>This function can generate the same errors as <a class="el" href="mem_8h.html#abd3e1891b46e607875238265f290fb29">jw_data_malloc()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>The potentially null (\0) terminated string to copy. May be NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>The maximum number of bytes in src to copy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">char</td><td>* Returns the copy of the string containing the lesser of the full string (null terminated) or len bytes (result additionally null terminated). Allocated with <a class="el" href="mem_8h.html#abd3e1891b46e607875238265f290fb29">jw_data_malloc()</a>, NULL if src is NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a76f5b73061300c5869e67c0fca9eaf26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool jw_pool_add_cleaner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a255dff17d1bc72e3e9c0696f3faab1a9">jw_pool_cleaner</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjw__err.html">jw_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Associate a callback to be fired when the given pointer is freed during the given pool's destruction.</p>
<p>This function can generate the following errors, set when returning false: </p><ul>
<li><code>JW_ERR_NO_MEMORY</code> if space for cleaner could not be allocated</li>
</ul>
<dl class="section invariant"><dt>Invariant</dt><dd>pool != NULL </dd>
<dd>
callback != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool</td><td>The memory pool in which the given pointer was allocated </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>The jw_pool_cleaner callback to be fired </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>An argument past to callback, typically the pointer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err</td><td>The error information (provide NULL to ignore) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns true if cleaner was successfully added, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae59f4bc0b44255ea89ffe96b137eef53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool jw_pool_calloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjw__err.html">jw_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate memory needed and allocate in given pool.</p>
<p>This function can generate the following errors set when returning false: </p><ul>
<li><code>JW_ERR_NO_MEMORY</code> if the ptr could not be allocated</li>
</ul>
<dl class="section invariant"><dt>Invariant</dt><dd>pool != NULL </dd>
<dd>
ptr != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool</td><td>The jw_pool from which to allocate memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num</td><td>Number of items </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of one item </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ptr</td><td>Pointer to newly allocated block of size num*size. NULL if num*size == 0 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err</td><td>The error information (provide NULL to ignore) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns true if ptr was successfully allocated, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6fd72f610af884058dcdda3eb947e0bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool jw_pool_create </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> **&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjw__err.html">jw_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new memory pool using the given block size.</p>
<p>This function can generate the following errors, set when returning false: </p><ul>
<li><code>JW_ERR_NO_MEMORY</code> if the pool could not be allocated</li>
</ul>
<dl class="section invariant"><dt>Invariant</dt><dd>pool != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>block byte size, 0 implies always use jw_data_malloc. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pool</td><td>Newly constructed memory pool </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err</td><td>The error information (provide NULL to ignore) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns true if pool was successfully created, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a166b7b46a65b6d4f7004ab60479022d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> void jw_pool_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free any memory allocated by the given pool, including the pool itself.</p>
<p>Bound jw_pool_cleaner callbacks are invoked before any memory is freed.</p>
<dl class="section invariant"><dt>Invariant</dt><dd>pool != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>The memory pool to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abefd486f26ffcd709b1e115f0d759cfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool jw_pool_malloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjw__err.html">jw_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate memory from the given pool.</p>
<p>This function can generate the following errors, set when returning false: </p><ul>
<li><code>JW_ERR_NO_MEMORY</code> if the ptr could not be allocated</li>
</ul>
<dl class="section invariant"><dt>Invariant</dt><dd>pool != NULL </dd>
<dd>
ptr != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool</td><td>The jw_pool from which to allocate memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The number of bytes to allocate. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ptr</td><td>The newly allocated pointer. NULL if size == 0 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err</td><td>The error information (provide NULL to ignore) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns true if pool was successfully created, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a91c9fe02c0a8d997d2af45609bd52231"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="basics_8h.html#a83a72fcd21631ca7baf97aaaa2778200">JABBERWERX_API</a> bool jw_pool_strdup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a07d7228a240d61b783d9b8395e72c656">jw_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>cpy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjw__err.html">jw_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Duplicate a string by allocating memory in the given pool.</p>
<p>This function can generate the following errors set when returning false: </p><ul>
<li><code>JW_ERR_NO_MEMORY</code> if the cpy could not be allocated</li>
</ul>
<dl class="section invariant"><dt>Invariant</dt><dd>pool != NULL </dd>
<dd>
cpy != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool</td><td>The jw_pool from which to allocate memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>The string to copy. May be NULL </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cpy</td><td>The copy of src allocated in pool. NULL if src was NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err</td><td>The error information (provide NULL to ignore) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns true if cpy was successfully created, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 8 2015 12:17:54 for JabberWerxC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
